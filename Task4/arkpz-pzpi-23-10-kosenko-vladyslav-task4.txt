МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ

ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ
УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ

Кафедра «Програмна інженерія»






ЗВІТ
Дисципліна «Аналіз та рефакторинг коду»
Лабораторна робота №4
«РОЗРОБКА IoT КЛІЄНТА 
(БІЗНЕС-ЛОГІКИ ТА ФУНКЦІЙ НАЛАШТУВАННЯ)»






Виконав:                                                                                         Прийняв:
ст. гр. ПЗПІ-23-10                                                                        Дашенков Д.С.
Косенко В.В.



Харків 2025
Мета роботи: розробити програмне забезпечення для  IoT або SmartDevice пристрою

Тема роботи: Розробка та реалізація ІоТ клієнта програмної системи «MelodyTrack»

Посилання на репозиторій: https://github.com/NureKosenkoVladyslav/ark-pzpi-23-10-kosenko-vladyslav


1. Текстовий опис інженерних рішень
У межах лабораторної роботи було розроблено програмне забезпечення для ІоТ-пристрою (Smart-Metronome), що є частиною системи моніторингу музичної освіти.
Ключові інженерні рішення:
1.	Архітектура "Edge Computing": Пристрій не просто передає "сирі" дані про час гри, а самостійно виконує математичну обробку та оцінювання результату перед відправкою. Це зменшує навантаження на сервер.
2.	Протокол взаємодії: Використано сучасний стек REST API. Обмін даними здійснюється за допомогою HTTP POST запитів у форматі JSON, що забезпечує сумісність пристрою з будь-якими хмарними сервісами.
3.	Емуляція сенсорів: Оскільки фізичний датчик замінено програмним модулем, реалізовано механізм імітації вхідного сигналу (тривалості репетиції) для перевірки логіки системи.
4.	Автономність: Клієнт реалізований як незалежний модуль, який самостійно ініціює сесію зв'язку з базою даних після завершення циклу вимірювання.

2. Фрагменти програмного коду
2.1. Налаштування IoT клієнта
Налаштування реалізовані через блок констант, що дозволяє швидко переконфігурувати пристрій (змінити ID учня або адресу сервера) без втручання в основний алгоритм.
// Блок функцій налаштування пристрою (Хардкод)
private const string ApiUrl = "https://localhost:7037/api/Grades"; // Адреса шлюзу
private const int CurrentStudentId = 4;   // ID Марії Співак (з БД)
private const int CurrentTeacherId = 3; // ID Олександра Музики (з БД)
private const int CurrentSubjectId = 1;         // Дисципліна: Фортепіано
private const double ComplexityK = 1.1;  // Коефіцієнт складності твору
2.2. Бізнес-логіка (Математична обробка)
Логіка перетворює фізичний показник (хвилини) у навчальний результат (бали від 1 до 12).
// Імітація збору даних від датчика
int practiceMinutes = 42; 

// Математична обробка: розрахунок оцінки
// Формула враховує час гри та складність, обмежуючи результат 12 балами
double rawScore = (practiceMinutes * ComplexityK) / 4;
int finalGrade = (int)Math.Clamp(Math.Round(rawScore), 1, 12);

// Формування JSON-пакета для синхронізації
var payload = new
{
    value = finalGrade,
    comment = $"IoT Auto-Log: {practiceMinutes} хв репетиції (K={ComplexityK})",
    date = DateTime.Now,
    subjectID = SubjectId,
    studentID = TargetStudentId,
    teacherID = AssignedTeacherId
};

3.1. UML діаграма прецедентів ІоТ клієнта
Діаграма відображає основні функціональні можливості пристрою в контексті його взаємодії з користувачем (учнем) та зовнішньою системою (API Сервером).
 
3.2. UML діаграма діяльності ІоТ клієнта
Діаграма діяльності візуалізує алгоритм роботи пристрою: від зчитування параметрів до обробки відповіді від сервера.
 

4. Перевірка роботи
Під час тестування було виконано запуск ІоТ клієнта паралельно з працюючим Web-API.
1.	Вхідні дані: Пристрій зафіксував 42 хвилини гри.
2.	Логіка: Програма розрахувала бал 12 (з урахуванням коефіцієнта 1.2).
3.	Результат: Сервер повернув статус 201 Created. Запис успішно з'явився в таблиці Grades бази даних MelodyTrackDB, що підтверджує повну інтеграцію клієнта в систему.
Висновок: Розроблене ПЗ відповідає концепції SmartDevice, забезпечує автономну обробку даних та надійну взаємодію з хмарною інфраструктурою.



