МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ

ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ
УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ

Кафедра «Програмна інженерія»






ЗВІТ
Дисципліна «Аналіз та рефакторинг коду»
Лабораторна робота №2
«РОЗРОБКА БАЗИ ДАНИХ ДЛЯ СЕРВЕРНОЇ ЧАСТИНИ ПРОГРАМНОЇ СИСТЕМИ ТА ПРИКЛАДНОГО ПРОГРАМНОГО ІНТЕРФЕЙСУ (API)»






Виконав:                                                                                         Прийняв:
ст. гр. ПЗПІ-23-10                                                                        Дашенков Д.С.
Косенко В.В.



Харків 2025
Мета роботи: Розробити базу даних для серверної частини програмної системи та прикладного програмного інтерфейсу. 

Тема роботи: Програмна система для автоматизації діяльності музичної школи «MelodyTrack»

Посилання на відеозапис: https://youtu.be/5XRoS52AIDA
Посилання на репозиторій: https://github.com/NureKosenkoVladyslav/ark-pzpi-23-10-kosenko-vladyslav

Хід роботи

Стек: C# + ASP.NET Core Web API (сучасний стандарт для серверних рішень).
База даних: Microsoft SQL Server (Express). Рішення: потужна реляційна БД для забезпечення цілісності даних про успішність учнів.
ORM: Entity Framework Core. Рішення: використання підходу Code-First для автоматичної синхронізації моделей C# із таблицями бази даних.
Архітектура: REST API. Використання JSON забезпечує легку взаємодію з фронтенд-частиною або мобільними додатками для вчителів.

Система розділена на три логічні шари:
Layer 1: Models (Сутності) — класи Grade та Repertoire, що описують структуру даних музичної школи.
Layer 2: Data (Доступ до даних) — реалізований через MelodyDbContext для взаємодії з SQL Server.
Layer 3: Controllers (API) — GradesController та RepertoireController, що обробляють запити на виставлення оцінок та оновлення планів.
2. Створити UML діаграму прецедентів для серверної частини
Визначено дві основні ролі (актори) для управління навчальним процесом:
Вчитель: Виставлення та редагування оцінок (MF-1), формування репертуарного плану (MF-2).
Учень: Перегляд власного журналу успішності та актуального списку творів для вивчення.
 
рис 1 — UML діаграма прецедентів MelodyTrack

3. Створити ER діаграму даних
1. Users
Сутність зберігає облікові записи користувачів системи.
Атрибути:
1.	UserID — унікальний ідентифікатор користувача (PK)
2.	FullName — повне ім’я користувача
3.	Email — електронна адреса
4.	PasswordHash — хеш пароля
5.	RoleID — ідентифікатор ролі користувача (FK)
2. Roles
Сутність визначає ролі користувачів у системі.
Атрибути:
1.	RoleID — унікальний ідентифікатор ролі (PK)
2.	RoleName — назва ролі (наприклад, вчитель, учень, адміністратор)
3. Students
Опціональна сутність, що використовується для логічного відокремлення учнів серед користувачів системи.
Атрибути:
1.	StudentID — унікальний ідентифікатор учня (PK)
2.	Name — ім’я учня
4. Subjects
Сутність зберігає перелік навчальних предметів.
Атрибути:
1.	SubjectID — унікальний ідентифікатор предмета (PK)
2.	SubjectName — назва предмета
5. Grades
Сутність призначена для зберігання інформації про результати навчання учнів.
Атрибути:
1.	GradeID — унікальний ідентифікатор оцінки (PK)
2.	Value — значення оцінки
3.	Comment — коментар вчителя
4.	Date — дата проведення заняття
5.	SubjectID — ідентифікатор предмета (FK)
6.	StudentID — ідентифікатор учня (FK)
7.	TeacherID — ідентифікатор вчителя (FK)
6. Repertoires
Сутність містить інформацію про музичний репертуар учнів.
Атрибути:
1.	PieceID — унікальний ідентифікатор музичного твору (PK)
2.	PieceName — назва твору
3.	Composer — композитор
4.	Status — статус вивчення твору (наприклад, «Вивчається», «Готово»)
5.	StudentID — ідентифікатор учня (FK)
7. Events
Сутність використовується для зберігання інформації про навчальні події.
Атрибути:
1.	EventID — унікальний ідентифікатор події (PK)
2.	Title — назва події
3.	EventDate — дата проведення події
4.	EventType — тип події

Зв’язки між сутностями
1.	Roles – Users: одна роль може бути призначена багатьом користувачам (1:N).
2.	Users – Grades: один учитель може виставляти багато оцінок (1:N).
3.	Students – Grades: один учень може мати багато оцінок (1:N).
4.	Subjects – Grades: один предмет пов’язаний з багатьма оцінками (1:N).
5.	Students – Repertoires: один учень може мати багато музичних творів у репертуарі (1:N).
 
Рис. 2 — ER діаграма даних 

4. Розробити базу даних (БД) програмної системи
Як СКБД обрано Microsoft SQL Server. База даних MelodyTrackDB розгорнута на локальному сервері SQLEXPRESS. Це забезпечує високу швидкість обробки запитів та підтримку складних транзакцій при масовому виставленні оцінок.
5. Створити діаграму структури БД
Структура складається з таблиць, що відображають навчальний план музичної школи.
 
Рис. 3 -  діаграма структури БД

6. Розробити функції роботи з БД (ORM)
Робота з базою реалізована через EF Core:
Створено MelodyDbContext, який керує підключенням через ConnectionString у appsettings.json.
Використано механізм Migrations (Add-Migration, Update-Database) для створення таблиць.
Реалізовано методи асинхронного збереження даних SaveChangesAsync(), що запобігає зависанню сервера при великих навантаженнях.
7. Розробити API для взаємодії з клієнтами
Розроблено REST API з такими основними методами:
GET /api/grades — перегляд журналу успішності.
POST /api/grades — виставлення нової оцінки вчителем.
GET /api/repertoire — перегляд списку творів.

8. Створити специфікацію розробленого API
Специфікація автоматично згенерована за допомогою Swagger (OpenAPI). Вона дозволяє візуально протестувати кожен метод, переглянути схеми JSON-об'єктів та отримати коди відповідей сервера (200 OK, 400 Bad Request).

9. Створити програмну реалізацію
Реалізація виконана в Visual Studio 2022:
Файл Program.cs налаштовує сервіси та черговість обробки запитів.
Контролери забезпечують валідацію даних (наприклад, перевірку діапазону оцінок 1-12).
10. Тестування
1.	Тестування БД: У SSMS підтверджено створення таблиць та успішне виконання SQL-запитів після роботи API.
2.	Тестування API: Через Swagger UI успішно проведено тест методу POST /api/Grades. Дані про оцінку "12" з коментарем успішно збережені в базі, отримано відповідь 200 OK.




